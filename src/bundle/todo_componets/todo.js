import { dom, Fragment, memoize } from "../mact/index.js";
import moment from 'moment';
import { initState, PeopleLookUp } from "./index"; // Todo Component

const Todo = props => {
  function renderTodo() {
    let todo = props.title == null ? "Junk data" : props.title;
    const decoration = props.done ? 'line-through' : 'none';
    return dom('Fragment', null, dom("div", {
      class: "titleDiv",
      style: {
        'text-decoration': decoration
      },
      onBlur: e => {
        const todo = {
          id: props.id,
          title: e.target.innerHTML
        };
        initState.actions.HandleChange(todo);
      },
      contentEditable: "true",
      id: props.id + "_title"
    }, todo), dom("div", {
      class: "controlsContainer"
    }, dom("span", {
      class: "dateContainer"
    }, moment(props.date).format("Do MMM YYYY")), dom("input", {
      type: "color",
      value: props.color,
      onChange: e => {
        const todo = {
          id: props.id,
          color: e.target.value
        };
        initState.actions.HandleChange(todo);
      }
    }), dom("span", {
      class: "datepicker-toggle"
    }, dom("span", {
      class: "datepicker-toggle-button"
    }), dom("input", {
      type: "date",
      class: "datepicker-input",
      value: new Date(props.date),
      onChange: e => {
        const todo = {
          id: props.id,
          date: e.target.value
        };
        initState.actions.HandleChange(todo);
      }
    })), dom("button", {
      dangerouslySetInnerHTML: {
        __html: `${props.isOpen ? '&#8593;' : '&#8595;'}`
      },
      style: {
        float: 'right',
        marginTop: '5px',
        fontWeight: 'bold'
      },
      onClick: e => {
        console.log('#' + "todo_" + props.id, $('#' + "todo_" + props.id).length);
        $('#' + "todo_" + props.id).toggle(); //        setTimeout(() => {

        initState.actions.HandleOpenClose(props); //      }, 3100);
      }
    })));
  }

  function Delete_Click(e) {
    if (confirm("Do you want to delete this record ?")) {
      initState.actions.HandleDelete(e.id);
    }
  }

  function Handle_Popup(id) {
    const _id = `#${id}`;
    console.log(_id);
    $(_id).colorbox({
      width: "600px",
      inline: false,
      html: dom(PeopleLookUp, props),
      onClosed: function () {
        $.colorbox.remove();
        $(_id).css('width', '');
      }
    });
  }

  function Done_Click(todo) {
    initState.actions.HandleStatus(todo);
  }

  let shadow = '5px 0px ' + (props.color || 'black'); //style={{ 'box-shadow': shadow }}

  return dom("div", {
    class: "todoItem",
    style: {
      boxShadow: shadow
    },
    id: "todoItem" + props.id,
    onMouseOver: e => {//e.target.style.boxShadow = shadow
    },
    onMouseOut: e => {//e.target.style.boxShadow = '';
    }
  }, props.done === true ? dom("del", null, " ", renderTodo(), " ") : renderTodo(), dom("div", {
    id: "todo_" + props.id,
    style: {
      display: props.isOpen ? "block" : "none"
    }
  }, dom("select", {
    value: props.status,
    onChange: e => {
      const todo = {
        id: props.id,
        status: e.target.value,
        done: e.target.value === "Done"
      };
      Done_Click(todo);
    }
  }, dom("option", {
    value: props.status
  }, props.status), ["Not Started", "Work in Progress", "Stuck", "Done"].filter(x => x != props.status).map(x => dom("option", {
    value: x
  }, x))), dom("button", {
    onClick: e => {
      Delete_Click(props);
    }
  }, "X"), props.desc != null && dom("button", {
    onClick: e => {
      // $("#" + props.id + "div").slideToggle();
      // initState.actions.HandleOpenClose(props);
      Handle_Popup("todoItem" + props.id);
    }
  }, "..."), props.desc != null && dom("div", {
    class: "desc",
    onBlur: e => {
      var todo = {
        id: props.id,
        desc: e.target.innerHTML,
        isOpen: true
      };
      initState.actions.HandleChange(todo);
    },
    contentEditable: "true",
    id: props.id + "div"
  }, props.desc)));
};

export default memoize(Todo);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2pzeC90b2RvX2NvbXBvbmV0cy90b2RvLmpzIl0sIm5hbWVzIjpbImRvbSIsIkZyYWdtZW50IiwibWVtb2l6ZSIsIm1vbWVudCIsImluaXRTdGF0ZSIsIlBlb3BsZUxvb2tVcCIsIlRvZG8iLCJwcm9wcyIsInJlbmRlclRvZG8iLCJ0b2RvIiwidGl0bGUiLCJkZWNvcmF0aW9uIiwiZG9uZSIsImUiLCJpZCIsInRhcmdldCIsImlubmVySFRNTCIsImFjdGlvbnMiLCJIYW5kbGVDaGFuZ2UiLCJkYXRlIiwiZm9ybWF0IiwiY29sb3IiLCJ2YWx1ZSIsIkRhdGUiLCJfX2h0bWwiLCJpc09wZW4iLCJmbG9hdCIsIm1hcmdpblRvcCIsImZvbnRXZWlnaHQiLCJjb25zb2xlIiwibG9nIiwiJCIsImxlbmd0aCIsInRvZ2dsZSIsIkhhbmRsZU9wZW5DbG9zZSIsIkRlbGV0ZV9DbGljayIsImNvbmZpcm0iLCJIYW5kbGVEZWxldGUiLCJIYW5kbGVfUG9wdXAiLCJfaWQiLCJjb2xvcmJveCIsIndpZHRoIiwiaW5saW5lIiwiaHRtbCIsIm9uQ2xvc2VkIiwicmVtb3ZlIiwiY3NzIiwiRG9uZV9DbGljayIsIkhhbmRsZVN0YXR1cyIsInNoYWRvdyIsImJveFNoYWRvdyIsImRpc3BsYXkiLCJzdGF0dXMiLCJmaWx0ZXIiLCJ4IiwibWFwIiwiZGVzYyJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsR0FBVCxFQUFjQyxRQUFkLEVBQXdCQyxPQUF4QixRQUF1QyxrQkFBdkM7QUFDQSxPQUFPQyxNQUFQLE1BQW1CLFFBQW5CO0FBQ0EsU0FBU0MsU0FBVCxFQUFvQkMsWUFBcEIsUUFBd0MsU0FBeEMsQyxDQUVBOztBQUNBLE1BQU1DLElBQUksR0FBSUMsS0FBRCxJQUFXO0FBQ3RCLFdBQVNDLFVBQVQsR0FBc0I7QUFDcEIsUUFBSUMsSUFBSSxHQUFHRixLQUFLLENBQUNHLEtBQU4sSUFBZSxJQUFmLEdBQXNCLFdBQXRCLEdBQW9DSCxLQUFLLENBQUNHLEtBQXJEO0FBQ0EsVUFBTUMsVUFBVSxHQUFHSixLQUFLLENBQUNLLElBQU4sR0FBYSxjQUFiLEdBQThCLE1BQWpEO0FBQ0EsV0FBTyxzQkFFTDtBQUFLLE1BQUEsS0FBSyxFQUFDLFVBQVg7QUFDRSxNQUFBLEtBQUssRUFBRTtBQUFFLDJCQUFtQkQ7QUFBckIsT0FEVDtBQUM0QyxNQUFBLE1BQU0sRUFBR0UsQ0FBRCxJQUFPO0FBQ3ZELGNBQU1KLElBQUksR0FBRztBQUNYSyxVQUFBQSxFQUFFLEVBQUVQLEtBQUssQ0FBQ08sRUFEQztBQUVYSixVQUFBQSxLQUFLLEVBQUVHLENBQUMsQ0FBQ0UsTUFBRixDQUFTQztBQUZMLFNBQWI7QUFJQVosUUFBQUEsU0FBUyxDQUFDYSxPQUFWLENBQWtCQyxZQUFsQixDQUErQlQsSUFBL0I7QUFDRCxPQVBIO0FBUUUsTUFBQSxlQUFlLEVBQUMsTUFSbEI7QUFTRSxNQUFBLEVBQUUsRUFBRUYsS0FBSyxDQUFDTyxFQUFOLEdBQVc7QUFUakIsT0FVR0wsSUFWSCxDQUZLLEVBZUw7QUFBSyxNQUFBLEtBQUssRUFBQztBQUFYLE9BQ0U7QUFBTSxNQUFBLEtBQUssRUFBQztBQUFaLE9BQ0dOLE1BQU0sQ0FBQ0ksS0FBSyxDQUFDWSxJQUFQLENBQU4sQ0FBbUJDLE1BQW5CLENBQTBCLGFBQTFCLENBREgsQ0FERixFQUtFO0FBQU8sTUFBQSxJQUFJLEVBQUMsT0FBWjtBQUFvQixNQUFBLEtBQUssRUFBRWIsS0FBSyxDQUFDYyxLQUFqQztBQUF3QyxNQUFBLFFBQVEsRUFBR1IsQ0FBRCxJQUFPO0FBQ3ZELGNBQU1KLElBQUksR0FBRztBQUNYSyxVQUFBQSxFQUFFLEVBQUVQLEtBQUssQ0FBQ08sRUFEQztBQUVYTyxVQUFBQSxLQUFLLEVBQUVSLENBQUMsQ0FBQ0UsTUFBRixDQUFTTztBQUZMLFNBQWI7QUFJQWxCLFFBQUFBLFNBQVMsQ0FBQ2EsT0FBVixDQUFrQkMsWUFBbEIsQ0FBK0JULElBQS9CO0FBQ0Q7QUFORCxNQUxGLEVBWUU7QUFBTSxNQUFBLEtBQUssRUFBQztBQUFaLE9BRUU7QUFBTSxNQUFBLEtBQUssRUFBQztBQUFaLE1BRkYsRUFHRTtBQUFPLE1BQUEsSUFBSSxFQUFDLE1BQVo7QUFBbUIsTUFBQSxLQUFLLEVBQUMsa0JBQXpCO0FBQTRDLE1BQUEsS0FBSyxFQUFFLElBQUljLElBQUosQ0FBU2hCLEtBQUssQ0FBQ1ksSUFBZixDQUFuRDtBQUF5RSxNQUFBLFFBQVEsRUFBR04sQ0FBRCxJQUFPO0FBQ3hGLGNBQU1KLElBQUksR0FBRztBQUNYSyxVQUFBQSxFQUFFLEVBQUVQLEtBQUssQ0FBQ08sRUFEQztBQUVYSyxVQUFBQSxJQUFJLEVBQUVOLENBQUMsQ0FBQ0UsTUFBRixDQUFTTztBQUZKLFNBQWI7QUFJQWxCLFFBQUFBLFNBQVMsQ0FBQ2EsT0FBVixDQUFrQkMsWUFBbEIsQ0FBK0JULElBQS9CO0FBQ0Q7QUFORCxNQUhGLENBWkYsRUF3QkU7QUFBUSxNQUFBLHVCQUF1QixFQUFFO0FBQUVlLFFBQUFBLE1BQU0sRUFBRyxHQUFFakIsS0FBSyxDQUFDa0IsTUFBTixHQUFlLFNBQWYsR0FBMkIsU0FBVTtBQUFsRCxPQUFqQztBQUF3RixNQUFBLEtBQUssRUFBRTtBQUFFQyxRQUFBQSxLQUFLLEVBQUUsT0FBVDtBQUFrQkMsUUFBQUEsU0FBUyxFQUFFLEtBQTdCO0FBQW9DQyxRQUFBQSxVQUFVLEVBQUU7QUFBaEQsT0FBL0Y7QUFBeUosTUFBQSxPQUFPLEVBQUdmLENBQUQsSUFBTztBQUN2S2dCLFFBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLE1BQU0sT0FBTixHQUFnQnZCLEtBQUssQ0FBQ08sRUFBbkMsRUFBd0NpQixDQUFDLENBQUMsTUFBTSxPQUFOLEdBQWdCeEIsS0FBSyxDQUFDTyxFQUF2QixDQUFELENBQTRCa0IsTUFBcEU7QUFDQUQsUUFBQUEsQ0FBQyxDQUFDLE1BQU0sT0FBTixHQUFnQnhCLEtBQUssQ0FBQ08sRUFBdkIsQ0FBRCxDQUE0Qm1CLE1BQTVCLEdBRnVLLENBR3ZLOztBQUNBN0IsUUFBQUEsU0FBUyxDQUFDYSxPQUFWLENBQWtCaUIsZUFBbEIsQ0FBa0MzQixLQUFsQyxFQUp1SyxDQUt2SztBQUVEO0FBUEQsTUF4QkYsQ0FmSyxDQUFQO0FBbUREOztBQUVELFdBQVM0QixZQUFULENBQXNCdEIsQ0FBdEIsRUFBeUI7QUFDdkIsUUFBSXVCLE9BQU8sQ0FBQyxxQ0FBRCxDQUFYLEVBQW9EO0FBQ2xEaEMsTUFBQUEsU0FBUyxDQUFDYSxPQUFWLENBQWtCb0IsWUFBbEIsQ0FBK0J4QixDQUFDLENBQUNDLEVBQWpDO0FBQ0Q7QUFDRjs7QUFFRCxXQUFTd0IsWUFBVCxDQUFzQnhCLEVBQXRCLEVBQTBCO0FBQ3hCLFVBQU15QixHQUFHLEdBQUksSUFBR3pCLEVBQUcsRUFBbkI7QUFDQWUsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlTLEdBQVo7QUFDQVIsSUFBQUEsQ0FBQyxDQUFDUSxHQUFELENBQUQsQ0FBT0MsUUFBUCxDQUFnQjtBQUNkQyxNQUFBQSxLQUFLLEVBQUUsT0FETztBQUNFQyxNQUFBQSxNQUFNLEVBQUUsS0FEVjtBQUNpQkMsTUFBQUEsSUFBSSxFQUFFLElBQUMsWUFBRCxFQUFrQnBDLEtBQWxCLENBRHZCO0FBQ29EcUMsTUFBQUEsUUFBUSxFQUFFLFlBQVk7QUFDdEZiLFFBQUFBLENBQUMsQ0FBQ1MsUUFBRixDQUFXSyxNQUFYO0FBQ0FkLFFBQUFBLENBQUMsQ0FBQ1EsR0FBRCxDQUFELENBQU9PLEdBQVAsQ0FBVyxPQUFYLEVBQW9CLEVBQXBCO0FBQ0Q7QUFKYSxLQUFoQjtBQVFEOztBQUVELFdBQVNDLFVBQVQsQ0FBb0J0QyxJQUFwQixFQUEwQjtBQUV4QkwsSUFBQUEsU0FBUyxDQUFDYSxPQUFWLENBQWtCK0IsWUFBbEIsQ0FBK0J2QyxJQUEvQjtBQUNEOztBQUVELE1BQUl3QyxNQUFNLEdBQUcsY0FBYzFDLEtBQUssQ0FBQ2MsS0FBTixJQUFlLE9BQTdCLENBQWIsQ0FqRnNCLENBa0Z0Qjs7QUFDQSxTQUNFO0FBQUssSUFBQSxLQUFLLEVBQUMsVUFBWDtBQUFzQixJQUFBLEtBQUssRUFBRTtBQUFFNkIsTUFBQUEsU0FBUyxFQUFFRDtBQUFiLEtBQTdCO0FBQW9ELElBQUEsRUFBRSxFQUFFLGFBQWExQyxLQUFLLENBQUNPLEVBQTNFO0FBQStFLElBQUEsV0FBVyxFQUFJRCxDQUFELElBQU8sQ0FDbEc7QUFDRCxLQUZEO0FBR0UsSUFBQSxVQUFVLEVBQUlBLENBQUQsSUFBTyxDQUNsQjtBQUNEO0FBTEgsS0FNR04sS0FBSyxDQUFDSyxJQUFOLEtBQWUsSUFBZixHQUFzQixzQkFBT0osVUFBVSxFQUFqQixNQUF0QixHQUFvREEsVUFBVSxFQU5qRSxFQVFFO0FBQUssSUFBQSxFQUFFLEVBQUUsVUFBVUQsS0FBSyxDQUFDTyxFQUF6QjtBQUE2QixJQUFBLEtBQUssRUFBRTtBQUFFcUMsTUFBQUEsT0FBTyxFQUFFNUMsS0FBSyxDQUFDa0IsTUFBTixHQUFlLE9BQWYsR0FBeUI7QUFBcEM7QUFBcEMsS0FDRTtBQUFRLElBQUEsS0FBSyxFQUFFbEIsS0FBSyxDQUFDNkMsTUFBckI7QUFBNkIsSUFBQSxRQUFRLEVBQUd2QyxDQUFELElBQU87QUFDNUMsWUFBTUosSUFBSSxHQUFHO0FBQ1hLLFFBQUFBLEVBQUUsRUFBRVAsS0FBSyxDQUFDTyxFQURDO0FBRVhzQyxRQUFBQSxNQUFNLEVBQUV2QyxDQUFDLENBQUNFLE1BQUYsQ0FBU08sS0FGTjtBQUdYVixRQUFBQSxJQUFJLEVBQUdDLENBQUMsQ0FBQ0UsTUFBRixDQUFTTyxLQUFULEtBQW1CO0FBSGYsT0FBYjtBQUtBeUIsTUFBQUEsVUFBVSxDQUFDdEMsSUFBRCxDQUFWO0FBQ0Q7QUFQRCxLQVFFO0FBQVEsSUFBQSxLQUFLLEVBQUVGLEtBQUssQ0FBQzZDO0FBQXJCLEtBQThCN0MsS0FBSyxDQUFDNkMsTUFBcEMsQ0FSRixFQVNHLENBQUMsYUFBRCxFQUFnQixrQkFBaEIsRUFBb0MsT0FBcEMsRUFBNkMsTUFBN0MsRUFDRUMsTUFERixDQUNTQyxDQUFDLElBQUlBLENBQUMsSUFBSS9DLEtBQUssQ0FBQzZDLE1BRHpCLEVBRUVHLEdBRkYsQ0FFT0QsQ0FBRCxJQUFPO0FBQVEsSUFBQSxLQUFLLEVBQUVBO0FBQWYsS0FBbUJBLENBQW5CLENBRmIsQ0FUSCxDQURGLEVBY0U7QUFDRSxJQUFBLE9BQU8sRUFBR3pDLENBQUQsSUFBTztBQUNkc0IsTUFBQUEsWUFBWSxDQUFDNUIsS0FBRCxDQUFaO0FBQ0Q7QUFISCxTQWRGLEVBcUJHQSxLQUFLLENBQUNpRCxJQUFOLElBQWMsSUFBZCxJQUNDO0FBQ0UsSUFBQSxPQUFPLEVBQUczQyxDQUFELElBQU87QUFDZDtBQUNBO0FBQ0F5QixNQUFBQSxZQUFZLENBQUMsYUFBYS9CLEtBQUssQ0FBQ08sRUFBcEIsQ0FBWjtBQUNEO0FBTEgsV0F0QkosRUFnQ0dQLEtBQUssQ0FBQ2lELElBQU4sSUFBYyxJQUFkLElBQ0M7QUFBSyxJQUFBLEtBQUssRUFBQyxNQUFYO0FBQ0UsSUFBQSxNQUFNLEVBQUczQyxDQUFELElBQU87QUFDYixVQUFJSixJQUFJLEdBQUc7QUFDVEssUUFBQUEsRUFBRSxFQUFFUCxLQUFLLENBQUNPLEVBREQ7QUFFVDBDLFFBQUFBLElBQUksRUFBRTNDLENBQUMsQ0FBQ0UsTUFBRixDQUFTQyxTQUZOO0FBR1RTLFFBQUFBLE1BQU0sRUFBRTtBQUhDLE9BQVg7QUFNQXJCLE1BQUFBLFNBQVMsQ0FBQ2EsT0FBVixDQUFrQkMsWUFBbEIsQ0FBK0JULElBQS9CO0FBQ0QsS0FUSDtBQVVFLElBQUEsZUFBZSxFQUFDLE1BVmxCO0FBV0UsSUFBQSxFQUFFLEVBQUVGLEtBQUssQ0FBQ08sRUFBTixHQUFXO0FBWGpCLEtBY0dQLEtBQUssQ0FBQ2lELElBZFQsQ0FqQ0osQ0FSRixDQURGO0FBK0RELENBbEpEOztBQW9KQSxlQUFldEQsT0FBTyxDQUFDSSxJQUFELENBQXRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZG9tLCBGcmFnbWVudCwgbWVtb2l6ZSB9IGZyb20gXCIuLi9tYWN0L2luZGV4LmpzXCI7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50J1xyXG5pbXBvcnQgeyBpbml0U3RhdGUsIFBlb3BsZUxvb2tVcCB9IGZyb20gXCIuL2luZGV4XCI7XHJcblxyXG4vLyBUb2RvIENvbXBvbmVudFxyXG5jb25zdCBUb2RvID0gKHByb3BzKSA9PiB7XHJcbiAgZnVuY3Rpb24gcmVuZGVyVG9kbygpIHtcclxuICAgIGxldCB0b2RvID0gcHJvcHMudGl0bGUgPT0gbnVsbCA/IFwiSnVuayBkYXRhXCIgOiBwcm9wcy50aXRsZTtcclxuICAgIGNvbnN0IGRlY29yYXRpb24gPSBwcm9wcy5kb25lID8gJ2xpbmUtdGhyb3VnaCcgOiAnbm9uZSdcclxuICAgIHJldHVybiA8PlxyXG5cclxuICAgICAgPGRpdiBjbGFzcz1cInRpdGxlRGl2XCJcclxuICAgICAgICBzdHlsZT17eyAndGV4dC1kZWNvcmF0aW9uJzogZGVjb3JhdGlvbiB9fSBvbkJsdXI9eyhlKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB0b2RvID0ge1xyXG4gICAgICAgICAgICBpZDogcHJvcHMuaWQsXHJcbiAgICAgICAgICAgIHRpdGxlOiBlLnRhcmdldC5pbm5lckhUTUxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBpbml0U3RhdGUuYWN0aW9ucy5IYW5kbGVDaGFuZ2UodG9kbyk7XHJcbiAgICAgICAgfX1cclxuICAgICAgICBjb250ZW50RWRpdGFibGU9XCJ0cnVlXCJcclxuICAgICAgICBpZD17cHJvcHMuaWQgKyBcIl90aXRsZVwifT5cclxuICAgICAgICB7dG9kb31cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHNDb250YWluZXJcIj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImRhdGVDb250YWluZXJcIj5cclxuICAgICAgICAgIHttb21lbnQocHJvcHMuZGF0ZSkuZm9ybWF0KFwiRG8gTU1NIFlZWVlcIil9XHJcbiAgICAgICAgPC9zcGFuPlxyXG5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImNvbG9yXCIgdmFsdWU9e3Byb3BzLmNvbG9yfSBvbkNoYW5nZT17KGUpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHRvZG8gPSB7XHJcbiAgICAgICAgICAgIGlkOiBwcm9wcy5pZCxcclxuICAgICAgICAgICAgY29sb3I6IGUudGFyZ2V0LnZhbHVlXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgaW5pdFN0YXRlLmFjdGlvbnMuSGFuZGxlQ2hhbmdlKHRvZG8pO1xyXG4gICAgICAgIH19IC8+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJkYXRlcGlja2VyLXRvZ2dsZVwiPlxyXG5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGF0ZXBpY2tlci10b2dnbGUtYnV0dG9uXCI+PC9zcGFuPlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJkYXRlXCIgY2xhc3M9XCJkYXRlcGlja2VyLWlucHV0XCIgdmFsdWU9e25ldyBEYXRlKHByb3BzLmRhdGUpfSBvbkNoYW5nZT17KGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdG9kbyA9IHtcclxuICAgICAgICAgICAgICBpZDogcHJvcHMuaWQsXHJcbiAgICAgICAgICAgICAgZGF0ZTogZS50YXJnZXQudmFsdWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaW5pdFN0YXRlLmFjdGlvbnMuSGFuZGxlQ2hhbmdlKHRvZG8pO1xyXG4gICAgICAgICAgfX0gLz5cclxuICAgICAgICA8L3NwYW4+XHJcblxyXG4gICAgICAgIDxidXR0b24gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiBgJHtwcm9wcy5pc09wZW4gPyAnJiM4NTkzOycgOiAnJiM4NTk1Oyd9YCB9fSBzdHlsZT17eyBmbG9hdDogJ3JpZ2h0JywgbWFyZ2luVG9wOiAnNXB4JywgZm9udFdlaWdodDogJ2JvbGQnIH19IG9uQ2xpY2s9eyhlKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygoJyMnICsgXCJ0b2RvX1wiICsgcHJvcHMuaWQpLCAkKCcjJyArIFwidG9kb19cIiArIHByb3BzLmlkKS5sZW5ndGgpO1xyXG4gICAgICAgICAgJCgnIycgKyBcInRvZG9fXCIgKyBwcm9wcy5pZCkudG9nZ2xlKCk7XHJcbiAgICAgICAgICAvLyAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBpbml0U3RhdGUuYWN0aW9ucy5IYW5kbGVPcGVuQ2xvc2UocHJvcHMpO1xyXG4gICAgICAgICAgLy8gICAgICB9LCAzMTAwKTtcclxuXHJcbiAgICAgICAgfX0+XHJcblxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvPlxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gRGVsZXRlX0NsaWNrKGUpIHtcclxuICAgIGlmIChjb25maXJtKFwiRG8geW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcmVjb3JkID9cIikpIHtcclxuICAgICAgaW5pdFN0YXRlLmFjdGlvbnMuSGFuZGxlRGVsZXRlKGUuaWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gSGFuZGxlX1BvcHVwKGlkKSB7XHJcbiAgICBjb25zdCBfaWQgPSBgIyR7aWR9YDtcclxuICAgIGNvbnNvbGUubG9nKF9pZCk7XHJcbiAgICAkKF9pZCkuY29sb3Jib3goe1xyXG4gICAgICB3aWR0aDogXCI2MDBweFwiLCBpbmxpbmU6IGZhbHNlLCBodG1sOiA8UGVvcGxlTG9va1VwIHsuLi5wcm9wc30gLz4sIG9uQ2xvc2VkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJC5jb2xvcmJveC5yZW1vdmUoKTtcclxuICAgICAgICAkKF9pZCkuY3NzKCd3aWR0aCcsICcnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIERvbmVfQ2xpY2sodG9kbykge1xyXG5cclxuICAgIGluaXRTdGF0ZS5hY3Rpb25zLkhhbmRsZVN0YXR1cyh0b2RvKTtcclxuICB9XHJcblxyXG4gIGxldCBzaGFkb3cgPSAnNXB4IDBweCAnICsgKHByb3BzLmNvbG9yIHx8ICdibGFjaycpO1xyXG4gIC8vc3R5bGU9e3sgJ2JveC1zaGFkb3cnOiBzaGFkb3cgfX1cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzcz1cInRvZG9JdGVtXCIgc3R5bGU9e3sgYm94U2hhZG93OiBzaGFkb3cgfX0gaWQ9e1widG9kb0l0ZW1cIiArIHByb3BzLmlkfSBvbk1vdXNlT3Zlcj17KChlKSA9PiB7XHJcbiAgICAgIC8vZS50YXJnZXQuc3R5bGUuYm94U2hhZG93ID0gc2hhZG93XHJcbiAgICB9KX1cclxuICAgICAgb25Nb3VzZU91dD17KChlKSA9PiB7XHJcbiAgICAgICAgLy9lLnRhcmdldC5zdHlsZS5ib3hTaGFkb3cgPSAnJztcclxuICAgICAgfSl9PlxyXG4gICAgICB7cHJvcHMuZG9uZSA9PT0gdHJ1ZSA/IDxkZWw+IHtyZW5kZXJUb2RvKCl9IDwvZGVsPiA6IHJlbmRlclRvZG8oKX1cclxuXHJcbiAgICAgIDxkaXYgaWQ9e1widG9kb19cIiArIHByb3BzLmlkfSBzdHlsZT17eyBkaXNwbGF5OiBwcm9wcy5pc09wZW4gPyBcImJsb2NrXCIgOiBcIm5vbmVcIiB9fT5cclxuICAgICAgICA8c2VsZWN0IHZhbHVlPXtwcm9wcy5zdGF0dXN9IG9uQ2hhbmdlPXsoZSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgdG9kbyA9IHtcclxuICAgICAgICAgICAgaWQ6IHByb3BzLmlkLFxyXG4gICAgICAgICAgICBzdGF0dXM6IGUudGFyZ2V0LnZhbHVlLFxyXG4gICAgICAgICAgICBkb25lOiAoZS50YXJnZXQudmFsdWUgPT09IFwiRG9uZVwiKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIERvbmVfQ2xpY2sodG9kbyk7XHJcbiAgICAgICAgfX0+XHJcbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPXtwcm9wcy5zdGF0dXN9Pntwcm9wcy5zdGF0dXN9PC9vcHRpb24+XHJcbiAgICAgICAgICB7W1wiTm90IFN0YXJ0ZWRcIiwgXCJXb3JrIGluIFByb2dyZXNzXCIsIFwiU3R1Y2tcIiwgXCJEb25lXCJdXHJcbiAgICAgICAgICAgIC5maWx0ZXIoeCA9PiB4ICE9IHByb3BzLnN0YXR1cylcclxuICAgICAgICAgICAgLm1hcCgoeCkgPT4gPG9wdGlvbiB2YWx1ZT17eH0+e3h9PC9vcHRpb24+KX1cclxuICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICBEZWxldGVfQ2xpY2socHJvcHMpO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICBYXHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAge3Byb3BzLmRlc2MgIT0gbnVsbCAmJiAoXHJcbiAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy8gJChcIiNcIiArIHByb3BzLmlkICsgXCJkaXZcIikuc2xpZGVUb2dnbGUoKTtcclxuICAgICAgICAgICAgICAvLyBpbml0U3RhdGUuYWN0aW9ucy5IYW5kbGVPcGVuQ2xvc2UocHJvcHMpO1xyXG4gICAgICAgICAgICAgIEhhbmRsZV9Qb3B1cChcInRvZG9JdGVtXCIgKyBwcm9wcy5pZClcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgLi4uXHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICApfVxyXG4gICAgICAgIHtwcm9wcy5kZXNjICE9IG51bGwgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRlc2NcIlxyXG4gICAgICAgICAgICBvbkJsdXI9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgdmFyIHRvZG8gPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogcHJvcHMuaWQsXHJcbiAgICAgICAgICAgICAgICBkZXNjOiBlLnRhcmdldC5pbm5lckhUTUwsXHJcbiAgICAgICAgICAgICAgICBpc09wZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgaW5pdFN0YXRlLmFjdGlvbnMuSGFuZGxlQ2hhbmdlKHRvZG8pO1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICBjb250ZW50RWRpdGFibGU9XCJ0cnVlXCJcclxuICAgICAgICAgICAgaWQ9e3Byb3BzLmlkICsgXCJkaXZcIn1cclxuXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtwcm9wcy5kZXNjfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1lbW9pemUoVG9kbyk7XHJcbiJdfQ==
//# sourceMappingURL=todo.js.map
