import { createElement, createFragment } from "./mact";
import { Item } from "./components/Ãtem";
const initState = {
  state: {},
  setState: function (obj, func = null) {
    console.log("old state", this.state);
    this.state = { ...this.state,
      ...obj
    };
    console.log("new state", this.state);

    if (func == null) {
      BootJSX(this.state);
    } else {
      func(obj);
    }
  }
};

const Stateful = function (state) {
  return function (component) {
    return component.bind(state);
  };
};

const stateFul = Stateful(initState);
const basicComponent = stateFul(props => {
  return createElement("span", null, "basicComponent ", this.state.name, " ");
});

const OrderHistoryContaier = props => {
  initState.state = { ...props
  };

  let clicked = item => {
    alert(item);
  };

  let search = e => {
    console.log(e, "e");
    initState.setState({
      name: e.target.value
    });
  };

  let ToggleList = e => {
    if ($("#list").is(":visible")) {
      initState.setState({
        items: [...props.items, ...[4, 5, 6, 7]]
      });
    }

    $("#list").slideToggle(1000);
  };

  return createElement("div", null, createElement(OrderHistorySearch, {
    name: props.name,
    search: search
  }), createElement("div", null, createElement("button", {
    class: "btn",
    onClick: ToggleList
  }, "Toggle With JQuery"), createElement("h3", null, "Example heading ", createElement("span", {
    class: "label label-default"
  }, "New")), createElement("p", null, "This is a paragraph in a fragment"), createElement('fragment', null, createElement("h1", null, "Hello ", props.name), createElement("hr", null), createElement("spam", null, " ", props.DisplayName != null ? props.DisplayName : "")), createElement("basicComponent", null), props.showItems ? createElement(ItemList, {
    items: props.items,
    clicked: clicked
  }) : createElement('fragment', null)));
};

const ItemList = props => {
  return createElement("ul", {
    id: "list"
  }, props.items.map(item => createElement(Item, {
    clicked: props.clicked,
    item: item
  })));
};

function SetCaretAtEnd(elem) {
  var elemLen = elem.value.length; // For IE Only

  if (document.selection) {
    // Set focus
    elem.focus(); // Use IE Ranges

    var oSel = document.selection.createRange(); // Reset position to 0 & then set at end

    oSel.moveStart("character", -elemLen);
    oSel.moveStart("character", elemLen);
    oSel.moveEnd("character", 0);
    oSel.select();
  } else if (elem.selectionStart || elem.selectionStart == "0") {
    console.log(elem); // Firefox/Chrome

    elem.selectionStart = elemLen;
    elem.selectionEnd = elemLen;
    elem.focus();
  } // if

}

const debounce = (func, delay) => {
  let inDebounce;
  return function () {
    const context = this;
    const args = arguments;
    clearTimeout(inDebounce);
    inDebounce = setTimeout(() => func.apply(context, args), delay);
  };
};

function memoize(func) {
  var memo = {};
  var slice = Array.prototype.slice;
  return function () {
    var args = slice.call(arguments);
    if (args in memo) return memo[args];else return memo[args] = func.apply(this, args);
  };
}

const OrderHistorySearch = memoize(props => {
  setTimeout(() => {
    SetCaretAtEnd(document.querySelector("#search"));
  }, 50);
  return createElement("input", {
    id: "search",
    type: "search",
    placeholder: "search something",
    value: props.name,
    onKeyUp: function (e) {
      let val = e.target.value;
      props.search({
        target: {
          value: val
        }
      });
    } //}, 500)}

  });
});
export const BootJSX = (props, container = "root") => {
  document.getElementById(container).innerHTML = "";
  document.getElementById(container).appendChild(createElement(OrderHistoryContaier, props));
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2pzeC9pbmRleC5qcyJdLCJuYW1lcyI6WyJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRnJhZ21lbnQiLCJJdGVtIiwiaW5pdFN0YXRlIiwic3RhdGUiLCJzZXRTdGF0ZSIsIm9iaiIsImZ1bmMiLCJjb25zb2xlIiwibG9nIiwiQm9vdEpTWCIsIlN0YXRlZnVsIiwiY29tcG9uZW50IiwiYmluZCIsInN0YXRlRnVsIiwiYmFzaWNDb21wb25lbnQiLCJwcm9wcyIsIm5hbWUiLCJPcmRlckhpc3RvcnlDb250YWllciIsImNsaWNrZWQiLCJpdGVtIiwiYWxlcnQiLCJzZWFyY2giLCJlIiwidGFyZ2V0IiwidmFsdWUiLCJUb2dnbGVMaXN0IiwiJCIsImlzIiwiaXRlbXMiLCJzbGlkZVRvZ2dsZSIsIkRpc3BsYXlOYW1lIiwic2hvd0l0ZW1zIiwiSXRlbUxpc3QiLCJtYXAiLCJTZXRDYXJldEF0RW5kIiwiZWxlbSIsImVsZW1MZW4iLCJsZW5ndGgiLCJkb2N1bWVudCIsInNlbGVjdGlvbiIsImZvY3VzIiwib1NlbCIsImNyZWF0ZVJhbmdlIiwibW92ZVN0YXJ0IiwibW92ZUVuZCIsInNlbGVjdCIsInNlbGVjdGlvblN0YXJ0Iiwic2VsZWN0aW9uRW5kIiwiZGVib3VuY2UiLCJkZWxheSIsImluRGVib3VuY2UiLCJjb250ZXh0IiwiYXJncyIsImFyZ3VtZW50cyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJhcHBseSIsIm1lbW9pemUiLCJtZW1vIiwic2xpY2UiLCJBcnJheSIsInByb3RvdHlwZSIsImNhbGwiLCJPcmRlckhpc3RvcnlTZWFyY2giLCJxdWVyeVNlbGVjdG9yIiwidmFsIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsYUFBVCxFQUF3QkMsY0FBeEIsUUFBOEMsUUFBOUM7QUFFQSxTQUFTQyxJQUFULFFBQXFCLG1CQUFyQjtBQUVBLE1BQU1D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QixDQUFELENBQWI7QUFDRCxHQUZTLEVBRVAsRUFGTyxDQUFWO0FBSUEsU0FDRTtBQUNFLElBQUEsRUFBRSxFQUFDLFFBREw7QUFFRSxJQUFBLElBQUksRUFBQyxRQUZQO0FBR0UsSUFBQSxXQUFXLEVBQUMsa0JBSGQ7QUFJRSxJQUFBLEtBQUssRUFBRWpELEtBQUssQ0FBQ0MsSUFKZjtBQUtFLElBQUEsT0FBTyxFQUFFLFVBQVVNLENBQVYsRUFBYTtBQUNwQixVQUFJMkMsR0FBRyxHQUFHM0MsQ0FBQyxDQUFDQyxNQUFGLENBQVNDLEtBQW5CO0FBQ0FULE1BQUFBLEtBQUssQ0FBQ00sTUFBTixDQUFhO0FBQ1hFLFFBQUFBLE1BQU0sRUFBRTtBQUNOQyxVQUFBQSxLQUFLLEVBQUV5QztBQUREO0FBREcsT0FBYjtBQUtELEtBWkgsQ0FhRTs7QUFiRixJQURGO0FBaUJELENBdEJpQyxDQUFsQztBQXdCQSxPQUFPLE1BQU14RCxPQUFPLEdBQUcsQ0FBQ00sS0FBRCxFQUFRbUQsU0FBUyxHQUFHLE1BQXBCLEtBQStCO0FBQ3BENUIsRUFBQUEsUUFBUSxDQUFDNkIsY0FBVCxDQUF3QkQsU0FBeEIsRUFBbUNFLFNBQW5DLEdBQStDLEVBQS9DO0FBQ0E5QixFQUFBQSxRQUFRLENBQ0w2QixjQURILENBQ2tCRCxTQURsQixFQUVHRyxXQUZILENBRWUsY0FBQyxvQkFBRCxFQUEwQnRELEtBQTFCLENBRmY7QUFHRCxDQUxNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgY3JlYXRlRnJhZ21lbnQgfSBmcm9tIFwiLi9tYWN0XCI7XHJcblxyXG5pbXBvcnQgeyBJdGVtIH0gZnJvbSBcIi4vY29tcG9uZW50cy/DjXRlbVwiO1xyXG5cclxuY29uc3QgaW5pdFN0YXRlID0ge1xyXG4gIHN0YXRlOiB7fSxcclxuICBzZXRTdGF0ZTogZnVuY3Rpb24gKG9iaiwgZnVuYyA9IG51bGwpIHtcclxuICAgIGNvbnNvbGUubG9nKFwib2xkIHN0YXRlXCIsIHRoaXMuc3RhdGUpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHsgLi4udGhpcy5zdGF0ZSwgLi4ub2JqIH07XHJcbiAgICBjb25zb2xlLmxvZyhcIm5ldyBzdGF0ZVwiLCB0aGlzLnN0YXRlKTtcclxuICAgIGlmIChmdW5jID09IG51bGwpIHtcclxuICAgICAgQm9vdEpTWCh0aGlzLnN0YXRlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZ1bmMob2JqKTtcclxuICAgIH1cclxuICB9LFxyXG59O1xyXG5cclxuY29uc3QgU3RhdGVmdWwgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5iaW5kKHN0YXRlKTtcclxuICB9O1xyXG59O1xyXG5cclxuY29uc3Qgc3RhdGVGdWwgPSBTdGF0ZWZ1bChpbml0U3RhdGUpO1xyXG5cclxuY29uc3QgYmFzaWNDb21wb25lbnQgPSBzdGF0ZUZ1bCgocHJvcHMpID0+IHtcclxuICByZXR1cm4gPHNwYW4+YmFzaWNDb21wb25lbnQge3RoaXMuc3RhdGUubmFtZX0gPC9zcGFuPjtcclxufSk7XHJcblxyXG5jb25zdCBPcmRlckhpc3RvcnlDb250YWllciA9IChwcm9wcykgPT4ge1xyXG4gIGluaXRTdGF0ZS5zdGF0ZSA9IHsgLi4ucHJvcHMgfTtcclxuICBsZXQgY2xpY2tlZCA9IChpdGVtKSA9PiB7XHJcbiAgICBhbGVydChpdGVtKTtcclxuICB9O1xyXG4gIGxldCBzZWFyY2ggPSAoZSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZSwgXCJlXCIpO1xyXG4gICAgaW5pdFN0YXRlLnNldFN0YXRlKHsgbmFtZTogZS50YXJnZXQudmFsdWUgfSk7XHJcbiAgfTtcclxuXHJcbiAgbGV0IFRvZ2dsZUxpc3QgPSAoZSkgPT4ge1xyXG4gICAgaWYgKCQoXCIjbGlzdFwiKS5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgIGluaXRTdGF0ZS5zZXRTdGF0ZSh7IGl0ZW1zOiBbLi4ucHJvcHMuaXRlbXMsIC4uLls0LCA1LCA2LCA3XV0gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJChcIiNsaXN0XCIpLnNsaWRlVG9nZ2xlKDEwMDApO1xyXG4gIH07XHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXY+XHJcbiAgICAgIDxPcmRlckhpc3RvcnlTZWFyY2ggbmFtZT17cHJvcHMubmFtZX0gc2VhcmNoPXtzZWFyY2h9IC8+XHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0blwiIG9uQ2xpY2s9e1RvZ2dsZUxpc3R9PlxyXG4gICAgICAgICAgVG9nZ2xlIFdpdGggSlF1ZXJ5XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPGgzPlxyXG4gICAgICAgICAgRXhhbXBsZSBoZWFkaW5nIDxzcGFuIGNsYXNzPVwibGFiZWwgbGFiZWwtZGVmYXVsdFwiPk5ldzwvc3Bhbj5cclxuICAgICAgICA8L2gzPlxyXG4gICAgICAgIDxwPlRoaXMgaXMgYSBwYXJhZ3JhcGggaW4gYSBmcmFnbWVudDwvcD5cclxuICAgICAgICA8PlxyXG4gICAgICAgICAgPGgxPkhlbGxvIHtwcm9wcy5uYW1lfTwvaDE+XHJcblxyXG4gICAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgICA8c3BhbT4ge3Byb3BzLkRpc3BsYXlOYW1lICE9IG51bGwgPyBwcm9wcy5EaXNwbGF5TmFtZSA6IFwiXCJ9PC9zcGFtPlxyXG4gICAgICAgIDwvPlxyXG5cclxuICAgICAgICA8YmFzaWNDb21wb25lbnQgLz5cclxuICAgICAgICB7cHJvcHMuc2hvd0l0ZW1zID8gKFxyXG4gICAgICAgICAgPEl0ZW1MaXN0IGl0ZW1zPXtwcm9wcy5pdGVtc30gY2xpY2tlZD17Y2xpY2tlZH0gLz5cclxuICAgICAgICApIDogKFxyXG4gICAgICAgICAgPD48Lz5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn07XHJcblxyXG5jb25zdCBJdGVtTGlzdCA9IChwcm9wcykgPT4ge1xyXG4gIHJldHVybiAoXHJcbiAgICA8dWwgaWQ9XCJsaXN0XCI+XHJcbiAgICAgIHtwcm9wcy5pdGVtcy5tYXAoKGl0ZW0pID0+IChcclxuICAgICAgICA8SXRlbSBjbGlja2VkPXtwcm9wcy5jbGlja2VkfSBpdGVtPXtpdGVtfT48L0l0ZW0+XHJcbiAgICAgICkpfVxyXG4gICAgPC91bD5cclxuICApO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gU2V0Q2FyZXRBdEVuZChlbGVtKSB7XHJcbiAgdmFyIGVsZW1MZW4gPSBlbGVtLnZhbHVlLmxlbmd0aDtcclxuICAvLyBGb3IgSUUgT25seVxyXG4gIGlmIChkb2N1bWVudC5zZWxlY3Rpb24pIHtcclxuICAgIC8vIFNldCBmb2N1c1xyXG4gICAgZWxlbS5mb2N1cygpO1xyXG4gICAgLy8gVXNlIElFIFJhbmdlc1xyXG4gICAgdmFyIG9TZWwgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcclxuICAgIC8vIFJlc2V0IHBvc2l0aW9uIHRvIDAgJiB0aGVuIHNldCBhdCBlbmRcclxuICAgIG9TZWwubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIC1lbGVtTGVuKTtcclxuICAgIG9TZWwubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIGVsZW1MZW4pO1xyXG4gICAgb1NlbC5tb3ZlRW5kKFwiY2hhcmFjdGVyXCIsIDApO1xyXG4gICAgb1NlbC5zZWxlY3QoKTtcclxuICB9IGVsc2UgaWYgKGVsZW0uc2VsZWN0aW9uU3RhcnQgfHwgZWxlbS5zZWxlY3Rpb25TdGFydCA9PSBcIjBcIikge1xyXG4gICAgY29uc29sZS5sb2coZWxlbSk7XHJcbiAgICAvLyBGaXJlZm94L0Nocm9tZVxyXG4gICAgZWxlbS5zZWxlY3Rpb25TdGFydCA9IGVsZW1MZW47XHJcbiAgICBlbGVtLnNlbGVjdGlvbkVuZCA9IGVsZW1MZW47XHJcbiAgICBlbGVtLmZvY3VzKCk7XHJcbiAgfSAvLyBpZlxyXG59XHJcbmNvbnN0IGRlYm91bmNlID0gKGZ1bmMsIGRlbGF5KSA9PiB7XHJcbiAgbGV0IGluRGVib3VuY2U7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzO1xyXG4gICAgY29uc3QgYXJncyA9IGFyZ3VtZW50cztcclxuICAgIGNsZWFyVGltZW91dChpbkRlYm91bmNlKTtcclxuICAgIGluRGVib3VuY2UgPSBzZXRUaW1lb3V0KCgpID0+IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyksIGRlbGF5KTtcclxuICB9O1xyXG59O1xyXG5cclxuZnVuY3Rpb24gbWVtb2l6ZShmdW5jKSB7XHJcbiAgdmFyIG1lbW8gPSB7fTtcclxuICB2YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XHJcblxyXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcclxuXHJcbiAgICBpZiAoYXJncyBpbiBtZW1vKSByZXR1cm4gbWVtb1thcmdzXTtcclxuICAgIGVsc2UgcmV0dXJuIChtZW1vW2FyZ3NdID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKSk7XHJcbiAgfTtcclxufVxyXG5jb25zdCBPcmRlckhpc3RvcnlTZWFyY2ggPSBtZW1vaXplKChwcm9wcykgPT4ge1xyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgU2V0Q2FyZXRBdEVuZChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NlYXJjaFwiKSk7XHJcbiAgfSwgNTApO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGlucHV0XHJcbiAgICAgIGlkPVwic2VhcmNoXCJcclxuICAgICAgdHlwZT1cInNlYXJjaFwiXHJcbiAgICAgIHBsYWNlaG9sZGVyPVwic2VhcmNoIHNvbWV0aGluZ1wiXHJcbiAgICAgIHZhbHVlPXtwcm9wcy5uYW1lfVxyXG4gICAgICBvbktleVVwPXtmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGxldCB2YWwgPSBlLnRhcmdldC52YWx1ZTtcclxuICAgICAgICBwcm9wcy5zZWFyY2goe1xyXG4gICAgICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgICAgICAgIHZhbHVlOiB2YWwsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9fVxyXG4gICAgICAvL30sIDUwMCl9XHJcbiAgICAvPlxyXG4gICk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IEJvb3RKU1ggPSAocHJvcHMsIGNvbnRhaW5lciA9IFwicm9vdFwiKSA9PiB7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIGRvY3VtZW50XHJcbiAgICAuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyKVxyXG4gICAgLmFwcGVuZENoaWxkKDxPcmRlckhpc3RvcnlDb250YWllciB7Li4ucHJvcHN9IC8+KTtcclxufTtcclxuIl19
//# sourceMappingURL=index.js.map
