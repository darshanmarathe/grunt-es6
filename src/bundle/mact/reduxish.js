import dom from './dom';

function updateElement(parent, next, prev) {
  // later virtualDOM mods
  if (!next.isEqualNode(prev)) {
    parent.replaceChild(next, parent.firstChild);
  }
} // eslint-disable-next-line


export function withState(elements, store) {
  let parentNode;
  let nextProps;
  store.subscribe(() => {
    const nextNode = dom(() => elements(nextProps));
    updateElement(parentNode, nextNode, parentNode.firstChild);
  });
  return props => {
    nextProps = props;
    return dom('span', {
      ref: node => {
        parentNode = node;
      }
    }, elements(props));
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2pzeC9tYWN0L3JlZHV4aXNoLmpzIl0sIm5hbWVzIjpbImRvbSIsInVwZGF0ZUVsZW1lbnQiLCJwYXJlbnQiLCJuZXh0IiwicHJldiIsImlzRXF1YWxOb2RlIiwicmVwbGFjZUNoaWxkIiwiZmlyc3RDaGlsZCIsIndpdGhTdGF0ZSIsImVsZW1lbnRzIiwic3RvcmUiLCJwYXJlbnROb2RlIiwibmV4dFByb3BzIiwic3Vic2NyaWJlIiwibmV4dE5vZGUiLCJwcm9wcyIsInJlZiIsIm5vZGUiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLEdBQVAsTUFBZ0IsT0FBaEI7O0FBRUEsU0FBU0MsYUFBVCxDQUF1QkMsTUFBdkIsRUFBK0JDLElBQS9CLEVBQXFDQyxJQUFyQyxFQUEyQztBQUN6QztBQUNBLE1BQUksQ0FBQ0QsSUFBSSxDQUFDRSxXQUFMLENBQWlCRCxJQUFqQixDQUFMLEVBQTZCO0FBQzNCRixJQUFBQSxNQUFNLENBQUNJLFlBQVAsQ0FBb0JILElBQXBCLEVBQTBCRCxNQUFNLENBQUNLLFVBQWpDO0FBQ0Q7QUFDRixDLENBRUQ7OztBQUNBLE9BQU8sU0FBU0MsU0FBVCxDQUFtQkMsUUFBbkIsRUFBNkJDLEtBQTdCLEVBQW9DO0FBQ3pDLE1BQUlDLFVBQUo7QUFDQSxNQUFJQyxTQUFKO0FBRUFGLEVBQUFBLEtBQUssQ0FBQ0csU0FBTixDQUFnQixNQUFNO0FBQ3BCLFVBQU1DLFFBQVEsR0FBR2QsR0FBRyxDQUFDLE1BQU1TLFFBQVEsQ0FBQ0csU0FBRCxDQUFmLENBQXBCO0FBQ0FYLElBQUFBLGFBQWEsQ0FBQ1UsVUFBRCxFQUFhRyxRQUFiLEVBQXVCSCxVQUFVLENBQUNKLFVBQWxDLENBQWI7QUFDRCxHQUhEO0FBS0EsU0FBT1EsS0FBSyxJQUFJO0FBQ2RILElBQUFBLFNBQVMsR0FBR0csS0FBWjtBQUNBLFdBQU9mLEdBQUcsQ0FDUixNQURRLEVBRVI7QUFDRWdCLE1BQUFBLEdBQUcsRUFBRUMsSUFBSSxJQUFJO0FBQ1hOLFFBQUFBLFVBQVUsR0FBR00sSUFBYjtBQUNEO0FBSEgsS0FGUSxFQU9SUixRQUFRLENBQUNNLEtBQUQsQ0FQQSxDQUFWO0FBU0QsR0FYRDtBQVlEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvbSBmcm9tICcuL2RvbSdcclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnQocGFyZW50LCBuZXh0LCBwcmV2KSB7XHJcbiAgLy8gbGF0ZXIgdmlydHVhbERPTSBtb2RzXHJcbiAgaWYgKCFuZXh0LmlzRXF1YWxOb2RlKHByZXYpKSB7XHJcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5leHQsIHBhcmVudC5maXJzdENoaWxkKVxyXG4gIH1cclxufVxyXG5cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoU3RhdGUoZWxlbWVudHMsIHN0b3JlKSB7XHJcbiAgbGV0IHBhcmVudE5vZGVcclxuICBsZXQgbmV4dFByb3BzXHJcblxyXG4gIHN0b3JlLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICBjb25zdCBuZXh0Tm9kZSA9IGRvbSgoKSA9PiBlbGVtZW50cyhuZXh0UHJvcHMpKVxyXG4gICAgdXBkYXRlRWxlbWVudChwYXJlbnROb2RlLCBuZXh0Tm9kZSwgcGFyZW50Tm9kZS5maXJzdENoaWxkKVxyXG4gIH0pXHJcblxyXG4gIHJldHVybiBwcm9wcyA9PiB7XHJcbiAgICBuZXh0UHJvcHMgPSBwcm9wc1xyXG4gICAgcmV0dXJuIGRvbShcclxuICAgICAgJ3NwYW4nLFxyXG4gICAgICB7XHJcbiAgICAgICAgcmVmOiBub2RlID0+IHtcclxuICAgICAgICAgIHBhcmVudE5vZGUgPSBub2RlXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgZWxlbWVudHMocHJvcHMpLFxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iXX0=
//# sourceMappingURL=reduxish.js.map
